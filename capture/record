#!/bin/bash

###################################################################
# Script Name	: Record (record)
# Description	: Records screen's area provided by `slop`.
#		  When called second time the process gets killed, handy for a keybinding.
# Args		: $1 - filename
# Dependencies	: wf-recorder
# Variables	:
# Author	: Mateusz Reszka
# Email		: mateusz@mateuszreszka.xyz
###################################################################

capture_dir="$HOME/Videos/capture"
mkdir -p $capture_dir

( pgrep -c wf-recorder > /dev/null ) &&\
	pkill wf-recorder &&\
	nots "Recording stopped!" &&\
	exit 0

filename=$1
[ -z "$1" ] && filename="$capture_dir/$(date +"%Y-%m-%dT%H-%M-%S").mp4"

wf-recorder -g "$(slurp)" -f $filename

nots "Recording started!"
